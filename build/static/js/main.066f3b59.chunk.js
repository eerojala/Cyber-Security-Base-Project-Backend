(this.webpackJsonpcyber_security_base_project=this.webpackJsonpcyber_security_base_project||[]).push([[0],{201:function(e,t,n){e.exports=n(357)},357:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(41),s=n.n(c),u=n(22),l=n(17),o=n(18),i=n(19),p=n(20),d=n(21),m=n(366),g=n(31),f=n(46),b=n(8),v=n.n(b),E=n(35),h=n.n(E),y=null,w=function(){return y},O=function(){var e;return v.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.awrap(h.a.get("/api/users"));case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}))},j=function(e){var t;return v.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v.a.awrap(h.a.post("/api/users",e,w()));case 2:return t=n.sent,n.abrupt("return",t.data);case 4:case"end":return n.stop()}}))},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_USERS":return t.data;case"NEW_USER":return e.concat(t.data);default:return e}},x=function(){var e;return v.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.awrap(h.a.get("/api/messages"));case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}))},S=function(e){var t;return v.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v.a.awrap(h.a.post("/api/messages",e,w()));case 2:return t=n.sent,n.abrupt("return",t.data);case 4:case"end":return n.stop()}}))},U=function(e,t){var n;return v.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,v.a.awrap(h.a.put("".concat("/api/messages","/").concat(e),t,w()));case 2:return n=a.sent,a.abrupt("return",n.data);case 4:case"end":return a.stop()}}))},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_MESSAGES":return t.data;case"NEW_MESSAGE":return e.concat(t.data);case"EDIT_MESSAGE":var n=e.filter((function(e){return e.id!==t.data.id}));return n.concat(t.data.updatedMessage);default:return e}},C=n(367),_=n(369),L=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return null===this.props.redirect||void 0===this.props.redirect?null:r.a.createElement(f.a,{to:this.props.redirect})}}]),t}(r.a.Component),k=Object(u.b)((function(e){return{redirect:e.redirect}}))(L),R=function(e){var t;return v.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v.a.awrap(h.a.post("/api/login",e));case 2:return t=n.sent,n.abrupt("return",t.data);case 4:case"end":return n.stop()}}))},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return t.user;case"LOGOUT":return null;default:return e}},A=function(e){return function(t){return v.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:t({type:"REDIRECT",data:e}),setTimeout((function(){t({type:"NULLIFY_REDIRECT"},100)}));case 2:case"end":return n.stop()}}))}},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REDIRECT":return t.data;case"NULLIFY_REDIRECT":return null;default:return e}},D=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).sendLoginCredentials=function(e){var t;return v.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e.preventDefault(),t={username:e.target.username.value,password:e.target.password.value},e.target.username.value="",e.target.password.value="",a.next=6,v.a.awrap(n.props.login(t));case 6:null!==a.sent?n.props.redirect("/"):alert("Login failed");case 8:case"end":return a.stop()}}))},n}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"Log in"),r.a.createElement(C.a,{onSubmit:this.sendLoginCredentials},r.a.createElement(C.a.Field,{label:"Username",name:"username",control:"input"}),r.a.createElement(C.a.Field,{label:"Password",name:"password",control:"input",type:"password"}),r.a.createElement(_.a,{type:"submit"},"Login")),r.a.createElement(k,null))}}]),t}(r.a.Component),F={login:function(e){return function(t){var n;return v.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,v.a.awrap(R(e));case 3:return n=a.sent,window.localStorage.setItem("loggedInUser",JSON.stringify(n)),r=n.token,y={headers:{Authorization:"bearer ".concat(r)}},console.log("Successfully logged in!"),t({type:"LOGIN",user:n}),a.abrupt("return",n);case 11:return a.prev=11,a.t0=a.catch(0),console.log(a.t0),a.abrupt("return",null);case 15:case"end":return a.stop()}var r}),null,null,[[0,11]])}},redirect:A},G=Object(u.b)(null,F)(D),P=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).editMessage=function(e){var t;return v.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e.preventDefault(),t={title:e.target.title.value,content:e.target.content.value},a.next=4,v.a.awrap(n.props.messageEdit(n.props.message.id,t));case 4:a.sent?n.props.redirect("/"):alert("fdsfdfsdf");case 6:case"end":return a.stop()}}))},n}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.message;return null===e||void 0===e?null:r.a.createElement("div",null,r.a.createElement("h3",null,"Edit this message"),r.a.createElement(C.a,{onSubmit:this.editMessage},r.a.createElement(C.a.Field,{label:"Title",name:"title",control:"input",defaultValue:e.title}),r.a.createElement(C.a.Field,{label:"Message",name:"content",control:"input",defaultValue:e.content}),r.a.createElement(_.a,{type:"submit"},"Edit")),r.a.createElement(k,null))}}]),t}(r.a.Component),H={messageEdit:function(e,t){return function(n){var a;return v.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,v.a.awrap(U(e,t));case 3:return a=r.sent,n({type:"EDIT_MESSAGE",data:{updatedMessage:a,id:e}}),r.abrupt("return",a);case 8:return r.prev=8,r.t0=r.catch(0),console.log(r.t0),r.abrupt("return",null);case 12:case"end":return r.stop()}}),null,null,[[0,8]])}},redirect:A},W=Object(u.b)((function(e,t){var n=t.messageId;return null===e.messages?{message:null}:{message:e.messages.find((function(e){return e.id===n}))}}),H)(P),J=n(368),B=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).createMessage=function(e){var t;return v.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e.preventDefault(),t={title:e.target.title.value,content:e.target.content.value},e.target.title.value="",e.target.content.value="",a.next=6,v.a.awrap(n.props.messageCreation(t));case 6:case"end":return a.stop()}}))},n}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h3",null,"Post a message"),r.a.createElement(C.a,{onSubmit:this.createMessage},r.a.createElement(C.a.Field,{label:"Title",name:"title",control:"input"}),r.a.createElement(C.a.Field,{label:"Message",name:"content",control:"input"}),r.a.createElement(_.a,{type:"submit"},"Post")))}}]),t}(r.a.Component),V={messageCreation:function(e){return function(t){var n;return v.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,v.a.awrap(S(e));case 3:return n=a.sent,t({type:"NEW_MESSAGE",data:n}),a.abrupt("return",n);case 8:return a.prev=8,a.t0=a.catch(0),console.log(a.t0),a.abrupt("return",null);case 12:case"end":return a.stop()}}),null,null,[[0,8]])}}},Y=Object(u.b)(null,V)(B),z=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(n=Object(i.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(c)))).form=function(){return null===n.props.loggedInUser||void 0===n.props.loggedInUser?null:r.a.createElement(Y,null)},n}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"Messages"),r.a.createElement(J.a,null,r.a.createElement(J.a.Header,null,r.a.createElement(J.a.Row,null,r.a.createElement(J.a.HeaderCell,null,"Title"),r.a.createElement(J.a.HeaderCell,null,"Poster"))),r.a.createElement(J.a.Body,null,this.props.messages.map((function(e){return r.a.createElement(J.a.Row,{key:e.id},r.a.createElement(J.a.Cell,null,r.a.createElement(g.b,{to:"/messages/".concat(e.id)},e.title)),r.a.createElement(J.a.Cell,null,e.user.username))})))),this.form())}}]),t}(r.a.Component),q=Object(u.b)((function(e){return{messages:e.messages,loggedInUser:e.loggedInUser}}))(z),K=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.message;if(null===e||void 0===e)return null;var t=null!==this.props.loggedInUser&&this.props.loggedInUser.id===e.user._id?r.a.createElement(g.b,{to:"/messages/".concat(e.id,"/edit")},"Edit"):null;return r.a.createElement("div",{key:e.id},r.a.createElement("h2",null,e.title),r.a.createElement("p",null,"From: ",e.user.username),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.content}}),r.a.createElement("p",null,t))}}]),t}(r.a.Component),Q=Object(u.b)((function(e,t){var n=t.messageId;return null===e.messages?{message:null}:{message:e.messages.find((function(e){return e.id===n})),loggedInUser:e.loggedInUser}}))(K),X=n(371),Z=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(n=Object(i.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(c)))).userLoggedIn=function(){return null!==n.props.loggedInUser&&void 0!==n.props.loggedInUser},n.loginMenuItem=function(){return n.userLoggedIn()?null:r.a.createElement(X.a.Item,{link:!0},r.a.createElement(g.b,{to:"/login"},"Login"))},n.registerMenuItem=function(){return n.userLoggedIn()?null:r.a.createElement(X.a.Item,null,r.a.createElement(g.b,{to:"/register"},"Register"))},n.logoutMenuItem=function(){return n.userLoggedIn()?r.a.createElement(X.a.Item,{onClick:n.props.logout},"Logout"):null},n}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(X.a,{inverted:!0},r.a.createElement(X.a.Item,{link:!0},r.a.createElement(g.b,{to:"/"},"Messages"),this.loginMenuItem(),this.registerMenuItem(),this.logoutMenuItem()))}}]),t}(r.a.Component),$={logout:function(){return function(e){e({type:"LOGOUT"})}}},ee=Object(u.b)((function(e,t){return{loggedInUser:e.loggedInUser}}),$)(Z),te=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).createUser=function(e){return v.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),t.next=3,v.a.awrap(n.props.userCreation({username:e.target.username.value,password:e.target.password.value}));case 3:t.sent?(alert("New user created successfully, you may now login with your credentials"),n.props.redirect("/login")):alert("Account registration failed, probably because you attempted to create a duplicate user");case 5:case"end":return t.stop()}}))},n}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h3",null,"Register a new account"),r.a.createElement(C.a,{onSubmit:this.createUser},r.a.createElement(C.a.Field,{label:"Username",name:"username",control:"input"}),r.a.createElement(C.a.Field,{label:"Password",name:"password",control:"input",type:"password"}),r.a.createElement(_.a,{type:"submit"},"Register")),r.a.createElement(k,null))}}]),t}(r.a.Component),ne={userCreation:function(e){return function(t){var n;return v.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,v.a.awrap(j(e));case 3:return n=a.sent,t({type:"NEW_USER",data:n}),a.abrupt("return",n);case 8:a.prev=8,a.t0=a.catch(0),console.log(a.t0);case 11:case"end":return a.stop()}}),null,null,[[0,8]])}},redirect:A},ae=Object(u.b)(null,ne)(te),re=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.userInit(),this.props.messageInit()}},{key:"render",value:function(){return r.a.createElement(m.a,null,r.a.createElement(g.a,null,r.a.createElement("div",null,r.a.createElement("h1",null,r.a.createElement(g.b,{to:"/"},"Messageboard")),r.a.createElement(ee,null),r.a.createElement(f.b,{exact:!0,path:"/",render:function(){return r.a.createElement(q,null)}}),r.a.createElement(f.b,{path:"/login",render:function(){return r.a.createElement(G,null)}}),r.a.createElement(f.b,{exact:!0,path:"/messages",render:function(){return r.a.createElement(q,null)}}),r.a.createElement(f.b,{exact:!0,path:"/messages/:id",render:function(e){var t=e.match;return r.a.createElement(Q,{messageId:t.params.id})}}),r.a.createElement(f.b,{exact:!0,path:"/messages/:id/edit",render:function(e){var t=e.match;return r.a.createElement(W,{messageId:t.params.id})}}),r.a.createElement(f.b,{path:"/register",render:function(){return r.a.createElement(ae,null)}}))))}}]),t}(r.a.Component),ce={userInit:function(e){return function(e){var t;return v.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v.a.awrap(O());case 2:t=n.sent,e({type:"INIT_USERS",data:t});case 4:case"end":return n.stop()}}))}},messageInit:function(e){return function(e){var t;return v.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v.a.awrap(x());case 2:t=n.sent,e({type:"INIT_MESSAGES",data:t});case 4:case"end":return n.stop()}}))}}},se=Object(u.b)(null,ce)(re),ue=n(65),le=n(189),oe=Object(ue.c)({users:I,messages:M,loggedInUser:T,redirect:N}),ie=Object(ue.d)(oe,Object(ue.a)(le.a));s.a.render(r.a.createElement(u.a,{store:ie},r.a.createElement(se,null)),document.getElementById("root"))}},[[201,1,2]]]);
//# sourceMappingURL=main.066f3b59.chunk.js.map